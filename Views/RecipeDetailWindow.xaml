<Window x:Class="CookMaster.Views.RecipeDetailWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="RecipeDetailWindow" Height="500" Width="800">
    <Grid Margin="8">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*" />
            <ColumnDefinition Width="Auto" />
        </Grid.ColumnDefinitions>

        <!-- Right column: buttons -->
        <StackPanel Grid.Column="1" Margin="4,0,0,0">
            <Button Content="Save &amp; Close" Width="160" Height="30" Margin="4" 
                    ToolTip="Save changes and close the window"
                    Command="{Binding PerformSaveCommand}"
                    Visibility="{Binding IsOwnerOrAdmin, Converter={StaticResource BoolToVis}}"
                    Style="{StaticResource ButtonSaveStyle}"/>
            <!-- Visible to admin OR the recipe owner -->
            <Button Content="Delete" Width="160" Height="30" Margin="4"
                    ToolTip="Delete this recipe"
                    Command="{Binding PerformDeleteCommand}" 
                    Visibility="{Binding IsOwnerOrAdmin, Converter={StaticResource BoolToVis}}"
                    Style="{StaticResource ButtonDangerStyle}"/>

            <Button Content="Close" Width="160" Height="30" Margin="4"
                    ToolTip="Close without saving changes"
                    Command="{Binding PerformCloseCommand}"
                    Style="{StaticResource ButtonLightGrayStyle}"/>
        </StackPanel>

        <!-- Left column: recipe details -->
        <StackPanel Grid.Column="0">
            <Label Content="Recipe Details" HorizontalAlignment="Center" VerticalAlignment="Center"/>
            <TextBlock Text="Title" Margin="4"/>
            <TextBox Margin="4"
                     Text="{Binding Title, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>

            <TextBlock Text="Ingredients" Margin="4"/>
            <ListBox ItemsSource="{Binding Ingredients}" SelectedItem="{Binding SelectedIngredient}" Height="100" Margin="4"/>

            <!-- Add / Remove controls -->
            <StackPanel Orientation="Horizontal" Margin="4">
                <TextBox Width="300" Margin="0,0,4,0"
             Text="{Binding NewIngredientText, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                <Button Content="Add" Width="80"
            Command="{Binding AddIngredientCommand}"
            Margin="0,0,4,0"/>
                <Button Content="Remove" Width="80"
            Command="{Binding RemoveIngredientCommand}"/>
            </StackPanel>

            <TextBlock Text="Instructions" Margin="4"/>
            <TextBox Margin="4" Height="100"
                     Text="{Binding Instructions, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                     AcceptsReturn="True"
                     TextWrapping="Wrap"
                     VerticalScrollBarVisibility="Auto"/>

            <TextBlock Text="Category" Margin="4"/>
            <ComboBox Margin="4"
                      ItemsSource="{Binding Categories}"
                      SelectedItem="{Binding Category, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
        </StackPanel>
    </Grid>
</Window>
